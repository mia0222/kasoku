<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>加速度の値を得る</title>
</head>
 
<body>
<div id="txt">ここにデータを表示</div>
 
<script>
var aX = 0, aY = 0, aZ = 0;

// 加速度センサへのアクセス許可を要求
if (typeof DeviceMotionEvent.requestPermission === 'function') {
  DeviceMotionEvent.requestPermission()
    .then(permissionState => {
      if (permissionState === 'granted') {
        // ユーザーが許可した場合の処理
        window.addEventListener("devicemotion", (dat) => {
          aX = dat.accelerationIncludingGravity.x;
          aY = dat.accelerationIncludingGravity.y;
          aZ = dat.accelerationIncludingGravity.z;
        });

        var timer = window.setInterval(() => {
          displayData();
        }, 33);
      } else {
        // ユーザーが許可しなかった場合の処理
        document.getElementById("txt").textContent = "加速度センサへのアクセスが拒否されました。";
      }
    })
    .catch(console.error);
}

function displayData() {
    var txt = document.getElementById("txt");
    txt.innerHTML = "x: " + aX + "<br>"
                  + "y: " + aY + "<br>"
                  + "z: " + aZ;
}
</script>
 
</body>
</html>
